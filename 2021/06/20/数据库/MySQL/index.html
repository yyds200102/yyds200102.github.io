<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>MySQL基础 | Notes</title><meta name="keywords" content="MySQL数据库基础"><meta name="author" content="Bug"><meta name="copyright" content="Bug"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MySQL数据库的基本使用">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL基础">
<meta property="og:url" content="http://example.com/2021/06/20/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/index.html">
<meta property="og:site_name" content="Notes">
<meta property="og:description" content="MySQL数据库的基本使用">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/cover/0.jpg">
<meta property="article:published_time" content="2021-06-20T02:53:05.000Z">
<meta property="article:modified_time" content="2021-06-21T02:53:05.000Z">
<meta property="article:author" content="Bug">
<meta property="article:tag" content="MySQL数据库基础">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/cover/0.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2021/06/20/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Bug","link":"链接: ","source":"来源: Notes","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL基础',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-06-21 10:53:05'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar/1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/cover/0.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Notes</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">MySQL基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-06-20T02:53:05.000Z" title="发表于 2021-06-20 10:53:05">2021-06-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-06-21T02:53:05.000Z" title="更新于 2021-06-21 10:53:05">2021-06-21</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>23分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="MySQL基础"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-初识数据库"><a href="#1-初识数据库" class="headerlink" title="1.初识数据库"></a>1.初识数据库</h1><h2 id="1-1、数据库基本概念"><a href="#1-1、数据库基本概念" class="headerlink" title="1.1、数据库基本概念"></a>1.1、数据库基本概念</h2><ul>
<li><p><strong>数据库</strong>（DB，DataBase）：相关互联的数据集合</p>
</li>
<li><p><strong>数据库管理系统</strong>（DBMS）：数据库系统核心部分，位于用户和os之间</p>
</li>
<li><p><strong>数据库系统</strong>（DBS）：由DB、DBMS、应用系统、DBA（数据库管理员）组成</p>
</li>
<li><p><strong>数据库应用系统</strong>（DBAS）：实现业务逻辑的应用程序</p>
</li>
</ul>
<h2 id="1-2、数据库分类"><a href="#1-2、数据库分类" class="headerlink" title="1.2、数据库分类"></a>1.2、数据库分类</h2><p><strong>关系型数据库</strong>：(SQL)</p>
<ul>
<li>代表：MySQL、Oracle、SQL Server</li>
<li>通过表和表、行和列之间的关系进行数据库的存储</li>
</ul>
<p> <strong>非关系型数据库</strong>：(NoSQL) Not Only</p>
<ul>
<li><p>代表：Redis、MongDB</p>
</li>
<li><p>特点：对象存储</p>
</li>
</ul>
<h2 id="1-3、数据模型"><a href="#1-3、数据模型" class="headerlink" title="1.3、数据模型"></a>1.3、数据模型</h2><blockquote>
<p><strong>根据抽象级别定义4种模型</strong></p>
</blockquote>
<ul>
<li><p><strong>概念模型：</strong>从用户角度描述数据库整体结构，现在常用E-R图表示</p>
<p>实体间联系：1对1、1对多、多对多</p>
</li>
<li><p><strong>逻辑模型：</strong>表达数据库逻辑结构，包括层次模型、网状模型、关系模型</p>
</li>
<li><p><strong>外部模型：</strong>逻辑模型的一个逻辑子集，根据业务特点设计</p>
</li>
<li><p><strong>内部模型：</strong>又称物理模型，描述在磁盘的存储方式</p>
</li>
</ul>
<blockquote>
<p><strong>关系模型</strong></p>
</blockquote>
<p><strong>概念：</strong>包括 数据结构、数据操作、数据的完整性约束</p>
<ul>
<li>关系型数据模型的数据结构<ul>
<li>关系：一个关系就是<strong>一张规范的二维表</strong>，表中的每一列<strong>不可再分</strong>（不能有表中表）</li>
<li>元组：表中的一行</li>
<li>主键：能唯一识别元组的最小属性集合，<strong>只能有一个</strong></li>
<li>候选键：可以有多个，和主键一样非空唯一</li>
<li>属性：表中的一列即为一个属性，每个属性有一个属性名</li>
<li>域：列（属性）的取值范围</li>
<li>关系模式：关系名即表名（属性1，属性2……，属性n）</li>
</ul>
</li>
<li>关系数据库模型的操作：增删改查</li>
<li>完整性约束<ul>
<li>实体完整性：主键不能为null</li>
<li>参照完整性：外键为空或为被参照关系中主键的某个值</li>
<li>用户定义完整性</li>
</ul>
</li>
</ul>
<h2 id="1-4、数据库体系结构"><a href="#1-4、数据库体系结构" class="headerlink" title="1.4、数据库体系结构"></a>1.4、数据库体系结构</h2><ul>
<li>外模式（子模式、用户模式）：又称用户<strong>视图</strong>，用户能直接看到，可以有多个</li>
<li>概念模式（模式、逻辑模式）：数据库全体数据的逻辑结构和特征的描述，只能有一个</li>
<li>内模式（存储、物理模式）：物理结构和存储方式的描述，只能有一个</li>
</ul>
<p><strong>数据独立性</strong>：</p>
<ul>
<li>物理独立性：内模式—–概念模式实现，程序和数据的独立</li>
<li>逻辑独立性：外模式—–概念模式实现，程序和逻辑的独立</li>
</ul>
<h2 id="1-5、SQL语言组成"><a href="#1-5、SQL语言组成" class="headerlink" title="1.5、SQL语言组成"></a>1.5、SQL语言组成</h2><ul>
<li><strong>数据定义语言DDL：</strong>数据定义语句，定义、修改、删除数据库中的对象<ul>
<li>包括CREATE、ALTER、DROP、RENAME以及删除TRUNCATE</li>
</ul>
</li>
<li><strong>数据操纵语言DML：</strong>数据操纵语句，增删改查</li>
<li><strong>数据控制语言DCL：</strong>数据控制语句，定义用户的访问权限和安全级别<ul>
<li>事务：ROLLBACK、COMMIT、SAVEPOINT</li>
<li>权限管理：GRANT、REMOVE</li>
<li>锁定数据库表实现并发控制：LOCKTABLE</li>
</ul>
</li>
</ul>
<blockquote>
<p>DCL</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span>      <span class="comment">-- 授予访问权限</span></span><br><span class="line"><span class="keyword">REVOKE</span>     <span class="comment">-- 撤销访问权限</span></span><br><span class="line"><span class="keyword">COMMIT</span>     <span class="comment">-- 提交事务处理</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>   <span class="comment">-- 事务处理回退</span></span><br><span class="line"><span class="keyword">SAVEPOINT</span>  <span class="comment">-- 设置保存点</span></span><br><span class="line">LOCK       <span class="comment">-- 对数据库的特定部分进行锁定</span></span><br></pre></td></tr></table></figure>

<h2 id="1-6、安装mysql"><a href="#1-6、安装mysql" class="headerlink" title="1.6、安装mysql"></a>1.6、安装mysql</h2><p>Sqlyog创建数据库：选utf-8和utf8_general_ci   创建表：引擎选InnoDB</p>
<ol>
<li><p>配置环境变量</p>
</li>
<li><p>创建my.ini文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">basedir=D:\mysql-5.7.33\</span><br><span class="line">datadir=D:\mysql-5.7.33\data\</span><br><span class="line">port=3306</span><br><span class="line">skip-grant-tables</span><br></pre></td></tr></table></figure></li>
<li><p>管理员运行DOC窗口转到bin目录下</p>
</li>
<li><p>输入mysqld -install安装</p>
</li>
<li><p>输入mysqld –initialize-insecure –console</p>
</li>
<li><p>输入net start mysql启动mysql</p>
</li>
<li><p>输入mysql -uroot -p     进入mysql</p>
</li>
<li><p>输入update mysql.user set authentication_string=password(‘123456’) where user=’root’and Host=’localhost’;       修改密码</p>
</li>
<li><p>输入flush privileges; 刷新权限</p>
</li>
<li><p>net stop mysql</p>
</li>
<li><p>net start mysql</p>
</li>
</ol>
<h1 id="2-数据库基础概念"><a href="#2-数据库基础概念" class="headerlink" title="2.数据库基础概念"></a>2.数据库基础概念</h1><h2 id="2-1、数据库列类型"><a href="#2-1、数据库列类型" class="headerlink" title="2.1、数据库列类型"></a>2.1、数据库列类型</h2><blockquote>
<h4 id="整型"><a href="#整型" class="headerlink" title="整型"></a><strong>整型</strong></h4></blockquote>
<ul>
<li>tinyint：        很小的数据  1字节</li>
<li>smallint：     较小数据   2字节</li>
<li>mediumint：中等大小   3字节</li>
<li>int：              标准整数   4字节</li>
<li>bigint：         较大的数据  8字节</li>
</ul>
<blockquote>
<p><strong>小数</strong></p>
</blockquote>
<ul>
<li>float：           浮点数    4字节</li>
<li>double</li>
<li>decimal          字符串形式浮点数 金融计算的时候一般是使用decaimal</li>
</ul>
<blockquote>
<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a><strong>字符串</strong></h4></blockquote>
<ul>
<li>char         字符串固定大小   0~255</li>
<li>varcahr    可变字符串           0~6535</li>
<li>tingtext   微型文本                2^8-1</li>
<li>text          文本串                   2^16-1</li>
</ul>
<blockquote>
<p><strong>二进制字符串</strong></p>
</blockquote>
<ul>
<li>binary</li>
<li>varbinary</li>
</ul>
<blockquote>
<h4 id="时间日期"><a href="#时间日期" class="headerlink" title="时间日期"></a>时间日期</h4></blockquote>
<ul>
<li>date           YYYY-MM-DD         日期</li>
<li>time           HH：mm：ss       时间格式</li>
<li>datatime         日期时间(最常用)</li>
<li>timestamp      时间戳，1970.1.1到现在的毫秒数</li>
<li>year                 年份表示</li>
</ul>
<blockquote>
<h4 id="4、Null"><a href="#4、Null" class="headerlink" title="4、Null"></a>4、Null</h4></blockquote>
<ul>
<li>没有值</li>
</ul>
<h2 id="2-2、数据库的字段属性"><a href="#2-2、数据库的字段属性" class="headerlink" title="2.2、数据库的字段属性"></a>2.2、数据库的字段属性</h2><ul>
<li><p>Unsigned： 无符号<strong>整数</strong>，不能为负数</p>
</li>
<li><p>Zerofill：  不足的位数使用0来填充</p>
</li>
<li><p>自增：   自动在上一条记录的基础上+1，必须整数类型，可以设计起始值和步长</p>
</li>
<li><p>非空：   </p>
</li>
<li><p>默认：   默认值</p>
</li>
</ul>
<h2 id="2-3、数据库表的类型"><a href="#2-3、数据库表的类型" class="headerlink" title="2.3、数据库表的类型"></a>2.3、数据库表的类型</h2><table>
<thead>
<tr>
<th></th>
<th>MYISAM</th>
<th>INNODB</th>
</tr>
</thead>
<tbody><tr>
<td>事务支持</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>数据行锁定</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>外键约束</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>全文索引</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>表空间大小</td>
<td>较小</td>
<td>较大，约为2倍</td>
</tr>
</tbody></table>
<ul>
<li>MYISAM：节约空间，速度较快</li>
<li>INNODB：安全性高，支持事务处理</li>
</ul>
<blockquote>
<p>在物理空间的位置：</p>
</blockquote>
<p><strong>所有数据库文件都在data目录下，一个文件夹对应一个数据库，本质还是文件的存储</strong></p>
<p><strong>INNODB：</strong></p>
<ul>
<li>数据库表中只有一个*.frm文件，以及上级目录的ibdata1文件</li>
</ul>
<p><strong>MYISAM：</strong></p>
<ul>
<li>*.frm： 表数据库的定义文件</li>
<li>*.MYD：数据文件</li>
<li>*.MYI： 索引文件</li>
</ul>
<blockquote>
<p>设置数据库的字节编码：</p>
</blockquote>
<p>charest=utf8</p>
<p>不设置会中文乱码</p>
<h2 id="2-4、MySQL常用函数"><a href="#2-4、MySQL常用函数" class="headerlink" title="2.4、MySQL常用函数"></a>2.4、MySQL常用函数</h2><h3 id="1、MySQL常量"><a href="#1、MySQL常量" class="headerlink" title="1、MySQL常量"></a>1、MySQL常量</h3><ul>
<li>字符串：         单引号’ ‘ 或双引号”   “</li>
<li>数值：             直接用</li>
<li>日期和时间： 单引号’ ‘ </li>
<li>布尔                 1表示true   0表示false</li>
<li>NULL                NULL参与运算，结果仍为NULL</li>
</ul>
<h3 id="2、常用函数"><a href="#2、常用函数" class="headerlink" title="2、常用函数"></a>2、常用函数</h3><blockquote>
<p>数学运算</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">-8</span>)            <span class="comment">-- 绝对值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CEILING</span>(<span class="number">9.4</span>)       <span class="comment">-- 下上取整</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">FLOOR</span>(<span class="number">9.4</span>)         <span class="comment">-- 向下</span></span><br><span class="line"><span class="keyword">SELECT</span> ROUND(<span class="number">45.926</span>, <span class="number">2</span>)   <span class="comment">-- 四舍五入 45.3</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MOD</span>(<span class="number">1600</span>, <span class="number">300</span>)     <span class="comment">-- 求余数 100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> RAND()             <span class="comment">-- 0~1的绝对值</span></span><br><span class="line"><span class="keyword">SELECT</span> SIGN(<span class="number">10</span>)           <span class="comment">-- 判断符号</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">TRUNCATE</span>(<span class="number">3.14159</span>,<span class="number">2</span>)  <span class="comment">-- 截取前面2位</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>字符串</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LOWER</span>()                       <span class="comment">-- 小写</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">UPPER</span>()                       <span class="comment">-- 大写</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CHAR_LENGTH</span>()                 <span class="comment">-- 长度</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;我&#x27;</span>,<span class="string">&#x27;是&#x27;</span>)              <span class="comment">-- 拼接字符串</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> SUBSTR(<span class="string">&#x27;HelloWorld&#x27;</span>,<span class="number">1</span>,<span class="number">5</span>)      <span class="comment">-- 截取字符串,第1个开始截取5个字符</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSERT</span>(<span class="string">&#x27;我爱学习&#x27;</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="string">&#x27;不&#x27;</span>)    <span class="comment">-- 替换字符串，返回  我不习</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> INSTR(<span class="string">&#x27;wzh&#x27;</span>,<span class="string">&#x27;h&#x27;</span>)              <span class="comment">-- 返回h第一次出现的索引</span></span><br><span class="line"><span class="keyword">SELECT</span> REPLACE(<span class="string">&#x27;坚持学习&#x27;</span>,<span class="string">&#x27;学习&#x27;</span>,<span class="string">&#x27;吃&#x27;</span>) <span class="comment">-- 替换</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>时间和日期</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_DATE</span>()    <span class="comment">-- 当前日期</span></span><br><span class="line"><span class="keyword">SELECT</span> CURDATE()         <span class="comment">-- 当前日期</span></span><br><span class="line"><span class="keyword">SELECT</span> NOW()             <span class="comment">-- 当前时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LOCALTIME</span>()       <span class="comment">-- 本地时间</span></span><br><span class="line"><span class="keyword">SELECT</span> SYSDATE()         <span class="comment">-- 系统时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(NOW())       <span class="comment">-- 年份</span></span><br></pre></td></tr></table></figure>

<h3 id="3、聚合函数"><a href="#3、聚合函数" class="headerlink" title="3、聚合函数"></a>3、聚合函数</h3><ul>
<li>COUNT()  计数  //不会忽略null值</li>
<li>SUM()   求和</li>
<li>AVG()   p平均值</li>
<li>MAX()   最大值</li>
<li>MIN()   最小值</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 不能在where中使用，可以在having中使用</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(id) <span class="keyword">FROM</span> student         <span class="comment">-- 会忽略NULL值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> student          <span class="comment">-- 不会忽略NULL值，本质是计算行数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="number">1</span>) <span class="keyword">FROM</span> student          <span class="comment">-- 不会忽略NULL值，本质是计算行数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(age) <span class="keyword">AS</span> 年龄 <span class="keyword">FROM</span> student   <span class="comment">-- 计算总和</span></span><br></pre></td></tr></table></figure>

<h3 id="4、MD5加密"><a href="#4、MD5加密" class="headerlink" title="4、MD5加密"></a>4、MD5加密</h3><p>MD5加密是<strong>不可逆</strong>的过程</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">插入后加密：</span><br><span class="line">UPDATE student <span class="keyword">SET</span> `pwd` <span class="operator">=</span> MD5(`pwd`) <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">插入时加密：</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (id,`name`,`pwd`,`sex`)<span class="keyword">VALUES</span>(<span class="number">9</span>,<span class="string">&#x27;李三啊&#x27;</span>,MD5(<span class="number">1258</span>),<span class="string">&#x27;男&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>检验：</strong>将用户传递进来的密码，进行MD5加密然后对比加密的值</p>
<h1 id="3-DDL结构化语句"><a href="#3-DDL结构化语句" class="headerlink" title="3.DDL结构化语句"></a>3.DDL结构化语句</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>   <span class="comment">-- 创建数据库表</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>    <span class="comment">-- 更改表结构、添加、删除、修改列长度</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span>     <span class="comment">-- 删除表</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX   <span class="comment">-- 在表上建立索引</span></span><br><span class="line"><span class="keyword">DROP</span> INDEX     <span class="comment">-- 删除索引</span></span><br></pre></td></tr></table></figure>

<h2 id="3-1、DDL之创建数据库"><a href="#3-1、DDL之创建数据库" class="headerlink" title="3.1、DDL之创建数据库"></a>3.1、DDL之创建数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Show</span> databases;             <span class="comment">-- 展示所有数据库</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> school;    <span class="comment">-- 创建school数据库</span></span><br><span class="line">USE school;                 <span class="comment">-- 使用school数据库</span></span><br><span class="line"><span class="keyword">DROP</span> DATABASE school;       <span class="comment">-- 删除数据库</span></span><br></pre></td></tr></table></figure>

<h2 id="3-2、DDL之创建表"><a href="#3-2、DDL之创建表" class="headerlink" title="3.2、DDL之创建表"></a>3.2、DDL之创建表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `student` (          <span class="comment">-- 创建student表</span></span><br><span class="line">	`id` <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,  <span class="comment">-- 自增</span></span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;张三&#x27;</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">	`pwd` <span class="type">VARCHAR</span>(<span class="number">20</span>),              <span class="comment">-- COMMENT  </span></span><br><span class="line">	`sex` <span class="type">VARCHAR</span>(<span class="number">2</span>),               <span class="comment">-- DEFAULT 默认值</span></span><br><span class="line">	`birthday` DATETIME,            <span class="comment">-- NOT NULL 非空</span></span><br><span class="line">	`addrss` <span class="type">VARCHAR</span>(<span class="number">100</span>),          <span class="comment">-- AUTO_INCREMENT 自增</span></span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY(id)</span><br><span class="line">)ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8            <span class="comment">-- 设置引擎和编码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student2 <span class="keyword">as</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student    <span class="comment">-- 子查询创建表</span></span><br><span class="line">USE student;                                      <span class="comment">-- 选择student表</span></span><br></pre></td></tr></table></figure>

<h2 id="3-3、DDL之表的修改"><a href="#3-3、DDL之表的修改" class="headerlink" title="3.3、DDL之表的修改"></a>3.3、DDL之表的修改</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 表添加列（字段）</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `student` <span class="keyword">ADD</span> age <span class="type">INT</span>(<span class="number">3</span>)<span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;18&#x27;</span> COMMENT <span class="string">&#x27;年龄&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> studtnet          <span class="comment">-- 删除student表，表结构不在</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> student       <span class="comment">-- 截断student表，表结构仍在</span></span><br><span class="line">                                       <span class="comment">-- 注意截断的表不能回滚，删除的可以</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `student` <span class="keyword">DROP</span> age1        <span class="comment">-- 删除字段</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `student` RENAME <span class="keyword">AS</span> s               <span class="comment">-- 重命名表名 </span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `student` <span class="keyword">to</span> s</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `student` CHANGE age age1 <span class="type">INT</span>(<span class="number">2</span>)    <span class="comment">-- 重命名字段名,必须指定类型和大小</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `student` MODIFY age <span class="type">VARCHAR</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;18&#x27;</span> COMMENT <span class="string">&#x27;年龄&#x27;</span> </span><br></pre></td></tr></table></figure>

<h2 id="3-4、数据约束"><a href="#3-4、数据约束" class="headerlink" title="3.4、数据约束"></a>3.4、数据约束</h2><p><strong>注意到：</strong>创建表之后字段后面跟的一大堆就是对字段的约束</p>
<ul>
<li>为了保证数据的一致性和完整性，SQL规范以约束的方式对表数据进行额外的条件限制</li>
<li>约束是表级的强制规定</li>
<li>可以在创建表时规定约束、或者在表创建之后</li>
</ul>
<p><strong>六种约束</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">NOT</span> <span class="keyword">NULL</span>       <span class="comment">-- 非空约束，规定某个字段不能为空</span></span><br><span class="line"><span class="keyword">UNIQUE</span>         <span class="comment">-- 唯一约束，规定某个字段在整个表中是唯一的</span></span><br><span class="line"><span class="keyword">PRIMARY</span> KEY    <span class="comment">-- 主键(非空且唯一) </span></span><br><span class="line"><span class="keyword">FOREIGN</span> KEY    <span class="comment">-- 外键</span></span><br><span class="line"><span class="keyword">CHECK</span>          <span class="comment">-- 检查约束  -- 可以使用但是mysql没有效果</span></span><br><span class="line"><span class="keyword">DEFAULT</span>        <span class="comment">-- 默认值</span></span><br></pre></td></tr></table></figure>

<p><strong>分类：</strong></p>
<ul>
<li>列级：只能约束单个字段</li>
<li>表级：可以约束多个字段</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- not null 非空约束</span></span><br><span class="line">id <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>                                <span class="comment">-- 建表时添加</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp MODIFY sex <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;   <span class="comment">-- 增加约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp MODIFY sex <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span>;       <span class="comment">-- 取消约束</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- UNIQUE 唯一约束默认创建唯一索引，注意不同字段直接可以重复</span></span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span>;</span><br><span class="line"><span class="keyword">CONSTRAINT</span> uk_name_pwd <span class="keyword">UNIQUE</span>(NAME)                 <span class="comment">-- 建表时添加，用户名不能重复</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span>(NAME,PASSWORD);         <span class="comment">-- 增加约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> uk_name_pwd <span class="keyword">UNIQUE</span>(NAME,PASSWORD);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> MODIFY NAME <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> <span class="keyword">DROP</span> INDEX uk_name_pwd;   <span class="comment">-- 删除约束,没自定义名字的话为字段名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 主键约束 一个表只能有一个</span></span><br><span class="line">`id` <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT        <span class="comment">-- 建表时添加主键</span></span><br><span class="line"><span class="keyword">CONSTRAINT</span> id <span class="keyword">PRIMARY</span> KEY(id,name)         <span class="comment">-- 表级才能定义多个子弹和定义别名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;               <span class="comment">-- 删除约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(name,pwd);      <span class="comment">-- 添加约束，已存在就不能添加</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> MODIFY id <span class="type">INT</span>(<span class="number">2</span>) <span class="keyword">PRIMARY</span> KEY;   <span class="comment">-- 修改约束，已存在就不能修改</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- FOREIGN KEY 外键约束</span></span><br><span class="line"><span class="keyword">FOREIGN</span> KEY (`gradeid`) REFERNECES `grade`(`id`)   <span class="comment">-- 关联年级表(grade)的id字段</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `student` <span class="keyword">ADD</span> 加上                      <span class="comment">-- 添加外键</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY emp_dept_id_fk;   <span class="comment">-- 删除外键</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>总结</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- not null  default</span></span><br><span class="line">id <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">20</span>;                    <span class="comment">-- 建表时添加</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp MODIFY sex <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;   <span class="comment">-- MODIFY修改字段</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 主键 PRIMARY KEY、唯一约束 UNIQUE</span></span><br><span class="line">id <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">UNIQUE</span><span class="operator">/</span><span class="keyword">PRIMARY</span>;     <span class="comment">-- 建表时列级范围添加</span></span><br><span class="line"><span class="keyword">PRIMARY</span> KEY<span class="operator">/</span><span class="keyword">UNIQUE</span>(name,pwd);  <span class="comment">-- 建表时标记范围添加  取别名 CONSTRAINT 名字 </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> <span class="keyword">ADD</span> 形式<span class="number">2</span>;         <span class="comment">-- ADD添加约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> MODIFY 形式<span class="number">1</span>;      <span class="comment">-- MODIFY修改字段</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> <span class="keyword">DROP</span> INDEX 约束名称;       <span class="comment">-- DROP删除约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 外键</span></span><br><span class="line"><span class="keyword">FOREIGN</span> KEY (`gradeid`) REFERNECES `grade`(`id`)   <span class="comment">-- 关联年级表(grade)的id字段</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `student` <span class="keyword">ADD</span> 加上第二句                 <span class="comment">-- 添加外键</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY 约束名称;</span><br></pre></td></tr></table></figure>

<h2 id="3-5、索引"><a href="#3-5、索引" class="headerlink" title="3.5、索引"></a>3.5、索引</h2><h3 id="1、索引"><a href="#1、索引" class="headerlink" title="1、索引"></a>1、索引</h3><p><strong>优点：</strong>索引是一种对数据库的某一列、或者多列的值进行排序的存储结构。索引相当于一本书中的目录，通过目录可以快速定位到某一节的内容，而不用一页一页的翻阅查找。</p>
<p><strong>缺点：</strong>会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件。</p>
<h3 id="2、索引分类"><a href="#2、索引分类" class="headerlink" title="2、索引分类"></a>2、索引分类</h3><ul>
<li><strong>主键索引 PRIMARY KEY</strong>： 自动创建，主键不可重复，只能有一个列作为主键</li>
<li><strong>唯一索引 UNIQUE KEY：</strong>可以有多个，索引列本列的值是唯一的，为可以空</li>
<li><strong>普通索引 KEY/INDEX ：</strong></li>
<li><strong>全文索引FULLTEXT ：</strong>特定的数据库引擎才有</li>
</ul>
<h3 id="3、使用索引"><a href="#3、使用索引" class="headerlink" title="3、使用索引"></a>3、使用索引</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 普通索引</span></span><br><span class="line">INDEX sex1(sex)                      <span class="comment">-- 建表时为sex添加索引sex1</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX sex1 <span class="keyword">ON</span> student(sex)    <span class="comment">-- 为student表的sex创建索引</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">ADD</span> 上述形式      <span class="comment">-- 通过修改表结构增加索引</span></span><br><span class="line">                                      </span><br><span class="line"><span class="comment">-- 唯一索引</span></span><br><span class="line"><span class="keyword">UNIQUE</span> sex(sex)                      <span class="comment">-- 索引名可以省略</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX sex <span class="keyword">ON</span> student(sex)</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> 密码(pwd)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 全文索引把 UNIQUE 改成 FULLTEXT 即可</span></span><br><span class="line"><span class="comment">--EXPLAIN分析sql执行的情况</span></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span><span class="keyword">FROM</span> student                             <span class="comment">--非全文索引</span></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> <span class="keyword">MATCH</span>(id) AGAINST(<span class="number">1</span>) <span class="comment">--全文索引</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看和删除索引</span></span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> student              <span class="comment">-- 查看索引</span></span><br><span class="line"><span class="keyword">DROP</span> INDEX sex <span class="keyword">ON</span> student            <span class="comment">-- 删除索引</span></span><br></pre></td></tr></table></figure>

<h3 id="4、组合索引"><a href="#4、组合索引" class="headerlink" title="4、组合索引"></a>4、组合索引</h3><p>在多个列中创建索引，使用组合索引时遵循最左匹配原则</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">ADD</span> INDEX index_name(id,age,name);</span><br></pre></td></tr></table></figure>



<h3 id="5、索引失效问题"><a href="#5、索引失效问题" class="headerlink" title="5、索引失效问题"></a>5、索引失效问题</h3><ol>
<li>like 以%开头，索引无效；当like前缀没有%，后缀有%时，索引有效</li>
<li>or语句前后没有同时使用索引</li>
<li>组合索引，若使用后面的而没有使用前面的字段，索引失效。如 (A,B,C) 使用到B，则必须使用了A 索引才会生效。</li>
<li>数据类型出现隐式转化。如varchar不加单引号的话可能会自动转换为int型，使索引无效，产生全表扫描。</li>
<li>在索引字段上使用not，&lt;&gt;，!=。不等于操作符是永远不会用到索引的，因此对它的处理只会产生全表扫描。</li>
<li>对索引字段进行计算操作、字段上使用函数。</li>
<li>当全表扫描速度比索引速度快时，mysql会使用全表扫描，此时索引失效。</li>
</ol>
<h1 id="4-DML增删改查"><a href="#4-DML增删改查" class="headerlink" title="4.DML增删改查"></a>4.DML增删改查</h1><h2 id="4-1、DML语言之增删改"><a href="#4-1、DML语言之增删改" class="headerlink" title="4.1、DML语言之增删改"></a>4.1、DML语言之增删改</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 增</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student (id,name,pwd,sex)<span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;wzh&#x27;</span>,<span class="number">123456</span>,<span class="string">&#x27;男&#x27;</span>)   </span><br><span class="line"><span class="comment">-- 增加操作，可以只增加部分值，剩下的不写，或者写NULL</span></span><br><span class="line"><span class="comment">-- 插入的值 可以用子查询的数据替代</span></span><br><span class="line"><span class="comment">-- 插入的数据可以用 NOW() 等函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 改</span></span><br><span class="line">UPDATE student <span class="keyword">SET</span> name <span class="operator">=</span> <span class="string">&#x27;zk&#x27;</span>,pwd<span class="operator">=</span><span class="number">234</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>                </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>                     <span class="comment">-- 清空表后自增列不变</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="number">9</span><span class="operator">+</span><span class="number">2</span>)          <span class="comment">-- 可以利用子查询删除</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> student                     <span class="comment">-- 清空表会重新设置自增列，不会影响事务</span></span><br></pre></td></tr></table></figure>

<p> DELETE删除后重启数据库：    </p>
<ul>
<li>INNODB：自增列从1开始(存在内存中)</li>
<li>MYISAM：继续从上一个自增量开始</li>
</ul>
<h2 id="3-3、DML语言之查"><a href="#3-3、DML语言之查" class="headerlink" title="3.3、DML语言之查"></a>3.3、DML语言之查</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [ <span class="keyword">ALL</span> <span class="operator">|</span> <span class="keyword">DISTINCT</span> <span class="operator">|</span> DISTINCTROW <span class="operator">|</span> TOP ] </span><br><span class="line">&#123;<span class="operator">*</span><span class="operator">|</span>talbe.<span class="operator">*</span><span class="operator">|</span>[table.]field1[<span class="keyword">AS</span> alias1][,[table.]field2[<span class="keyword">AS</span> alias2][,…]]&#125;   <span class="comment">--- 查的字段</span></span><br><span class="line"><span class="keyword">FROM</span> 表名[<span class="keyword">as</span> 别名]    <span class="comment">-- 从哪些表中选择</span></span><br><span class="line">	[<span class="keyword">left</span> <span class="operator">|</span> <span class="keyword">right</span> <span class="operator">|</span> <span class="keyword">inner</span> <span class="keyword">join</span> 表名<span class="number">2</span> ]  <span class="comment">-- 联合查询</span></span><br><span class="line">[<span class="keyword">IN</span> externaldatabase] </span><br><span class="line">[<span class="keyword">WHERE</span>…]       <span class="comment">--  结果满足的条件</span></span><br><span class="line">[<span class="keyword">GROUP</span> <span class="keyword">BY</span>…]    <span class="comment">-- 按照那些字段分组</span></span><br><span class="line">[<span class="keyword">HAVING</span>…]      <span class="comment">-- 过滤分组记录满足的条件</span></span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span>…]    <span class="comment">-- 结果排序</span></span><br><span class="line">[limit ]       <span class="comment">-- 分页</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--注意： 必须严格按照顺序来</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>1、查询全部</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `student`</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2、查询指定的字段（使用别名）</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.`id` <span class="keyword">AS</span> ID <span class="keyword">FROM</span> `student` <span class="keyword">AS</span> s  <span class="comment">-- 字段使用``</span></span><br><span class="line"><span class="keyword">SELECT</span> s.`id` <span class="string">&#x27;ID&#x27;</span> <span class="keyword">FROM</span> `student` `s`    <span class="comment">-- 字段别名&#x27;&#x27;,表取别名``</span></span><br><span class="line"><span class="keyword">SELECT</span> s.id ID <span class="keyword">FROM</span> student s            <span class="comment">-- 不用任何字符</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>3、concat函数</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;学号:&#x27;</span>,id) <span class="keyword">AS</span> ID <span class="keyword">FROM</span> student <span class="comment">-- 拼接字符串</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>4、对结果操作</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> age<span class="operator">+</span><span class="number">1</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">11</span> </span><br></pre></td></tr></table></figure>

<blockquote>
<p>5、去重</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> `id` <span class="keyword">FROM</span> student    <span class="comment">-- 使用 DISTINCT</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> age,id <span class="keyword">FROM</span> <span class="keyword">USER</span>     <span class="comment">-- DISTINCT作用于所有列，如这里，只有id和age均相同，才会被去重 </span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>6、where筛选</p>
</blockquote>
<ul>
<li>算数运算判断：&lt;    &lt;    =   &gt;   &gt;=     !=    =     &lt;&gt;(name &lt;&gt; ‘张三’ 即名字不为张三)</li>
<li>逻辑比较判断：AND或者&amp;&amp;    OR或者||     NOT或者！</li>
<li>之间判断：        BETWEEN   AND</li>
<li>之内判断：       IN</li>
<li>模糊匹配：       LIKE</li>
<li>空值判断：       IS   [NOT]  NULL</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- mysql 优先计算And 其次计算 or</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">USER</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">6</span> <span class="keyword">OR</span> id <span class="operator">=</span> <span class="number">3</span> <span class="keyword">AND</span> age <span class="operator">=</span> <span class="number">18</span> <span class="comment">-- id为6 或者 id为3且age为18</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">USER</span> <span class="keyword">WHERE</span> (id <span class="operator">=</span> <span class="number">6</span> <span class="keyword">OR</span> id <span class="operator">=</span> <span class="number">3</span>) <span class="keyword">AND</span> age <span class="operator">=</span> <span class="number">18</span>  <span class="comment">-- id为6或3 且 age为18</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- MySQL的 NOT 支持对 BETWEEN、IN、EXISTS 搭配使用 </span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>7、模糊查询：比较运算符</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> age <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id <span class="keyword">BETWEEN</span> <span class="number">5</span> <span class="keyword">AND</span> <span class="number">12</span> 	<span class="comment">-- 查询区间</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> NAME <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> NAME <span class="keyword">LIKE</span> <span class="string">&#x27;张%&#x27;</span>      <span class="comment">-- %表示任意字符,表示张....</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> NAME <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> NAME <span class="keyword">LIKE</span> <span class="string">&#x27;张_&#x27;</span>      <span class="comment">-- _表示一个字符,表示张x</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> NAME <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id <span class="keyword">IN</span>(<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>)      <span class="comment">-- 查询id为11、12、13之内的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> NAME <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> addrss <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>   <span class="comment">-- 查询address不为空</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>8、使用正则表达式查询</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">USER</span> <span class="keyword">WHERE</span> NAME REGEXP <span class="string">&#x27;1000&#x27;</span>  <span class="comment">-- 使用正则表达式，匹配包含1000的字符串</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">USER</span> <span class="keyword">WHERE</span> NAME REGEXP <span class="string">&#x27;1000|2000&#x27;</span>  <span class="comment">--  与</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">USER</span> <span class="keyword">WHERE</span> NAME REGEXP <span class="string">&#x27;[JT]&#x27;</span>       <span class="comment">-- 字符为J或者T 等于 J|T</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">USER</span> <span class="keyword">WHERE</span> NAME REGEXP <span class="string">&#x27;[^J]&#x27;</span>       <span class="comment">-- 字符不为J</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>9、相等连接（内连接）</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 连接student表和teacher表中id相等的行</span></span><br><span class="line"><span class="keyword">SELECT</span> s.name <span class="keyword">FROM</span> student s,teacher t <span class="keyword">WHERE</span> s.id<span class="operator">=</span>t.id              <span class="comment">-- 使用where</span></span><br><span class="line"><span class="keyword">SELECT</span> s.name <span class="keyword">FROM</span> student s <span class="keyword">INNER</span> <span class="keyword">JOIN</span> teacher t <span class="keyword">ON</span> s.id<span class="operator">=</span>t.id   <span class="comment">-- 使用join连接</span></span><br><span class="line">                          <span class="comment">-- INNER可以省略</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>10、高级连接</p>
</blockquote>
<ul>
<li>左连接：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.name,t.pwd <span class="keyword">FROM</span> student s <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> teacher t <span class="keyword">ON</span> s.id<span class="operator">=</span>t.id</span><br><span class="line"><span class="comment">-- 把student表的所有字段和teacher表的中满足条件的连接起来</span></span><br><span class="line"><span class="comment">-- 没有的字段会显示null</span></span><br><span class="line"><span class="comment">-- 此语句中会显示所有student表中的数据，满足内连接条件的会有t.pwd的值，其他都会显示为null</span></span><br><span class="line"><span class="comment">-- 直接left join也可以</span></span><br></pre></td></tr></table></figure>

<ul>
<li>右连接：左连接反过来</li>
<li>全连接：MySQL目前不支持</li>
<li>自连接</li>
</ul>
<blockquote>
<p>11、子查询:where语句中嵌套select语句，最多嵌套255层</p>
</blockquote>
<ul>
<li>返回单值</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.name <span class="keyword">FROM</span> student s <span class="keyword">WHERE</span> s.id <span class="operator">=</span> (<span class="keyword">SELECT</span> t.id <span class="keyword">FROM</span> teacher t <span class="keyword">WHERE</span> t.name<span class="operator">=</span><span class="string">&#x27;李三&#x27;</span>)</span><br><span class="line"><span class="comment">-- &lt;  &gt; 等等</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>返回多值：必须使用多值比较运算符</p>
<p><strong>IN</strong></p>
<p><strong>ALL</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.name <span class="keyword">FROM</span> student s <span class="keyword">WHERE</span> s.age <span class="operator">&gt;</span><span class="keyword">ALL</span>(<span class="keyword">SELECT</span> t.age <span class="keyword">FROM</span> teacher t <span class="keyword">WHERE</span> t.id<span class="operator">&gt;</span><span class="number">3</span>)                         <span class="comment">-- s.age必须大于所有返回的结果</span></span><br></pre></td></tr></table></figure>

<p><strong>ANY</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.name <span class="keyword">FROM</span> student s <span class="keyword">WHERE</span> s.age <span class="operator">&gt;</span><span class="keyword">ANY</span>(<span class="keyword">SELECT</span> t.age <span class="keyword">FROM</span> teacher t <span class="keyword">WHERE</span> t.id<span class="operator">&gt;</span><span class="number">3</span>)                         <span class="comment">-- s.age大于其中某一个即可</span></span><br></pre></td></tr></table></figure>

<p><strong>EXISTS</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">-- 将外查询表的每一行，代入内查询作为检验，如果内查询返回的结果取非空值，则EXISTS子句返回TRUE，这一行行可作为外查询的结果行，否则不能作为结果。</span></span><br><span class="line"><span class="keyword">SELECT</span> s.age <span class="keyword">FROM</span> student s <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span>(<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> teacher t <span class="keyword">WHERE</span> s.id<span class="operator">=</span>t.id)</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>子查询的作用</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">USER</span> <span class="keyword">WHERE</span> id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> <span class="number">3</span> <span class="keyword">AS</span> id)                  <span class="comment">-- 过滤数据 </span></span><br><span class="line"><span class="keyword">SELECT</span> id,NAME,(<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> o <span class="keyword">WHERE</span> o.id <span class="operator">=</span> c.id) <span class="keyword">FROM</span> c <span class="comment">-- 作为计算字段</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>12.合并查询结果</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 语句<span class="number">1</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> 语句<span class="number">2</span></span><br><span class="line"><span class="comment">-- 语句1和语句2查询的结果必须完全一致，Union自动去重</span></span><br><span class="line"><span class="comment">-- 只能使用一条order by 语句且在最后一条语句后面</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>13、分组过滤：</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id,name,pwd <span class="keyword">FROM</span> student <span class="keyword">GROUP</span> <span class="keyword">BY</span> name,id <span class="keyword">HAVING</span> id <span class="operator">&gt;</span><span class="number">4</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> id;</span><br><span class="line"><span class="comment">-- 所有相同的name的分成一组，每组的结果只选第一个</span></span><br><span class="line"><span class="comment">-- 可以按照多列分组</span></span><br><span class="line"><span class="comment">-- having只能和group by 一直使用，作用是进一步筛选</span></span><br><span class="line"><span class="comment">-- 通常配合聚合函数使用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 配合聚合函数</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>14、排序</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">ORDER</span> <span class="keyword">BY</span> id <span class="keyword">ASC</span>   <span class="comment">--  升序</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">ORDER</span> <span class="keyword">BY</span> id <span class="keyword">DESC</span>  <span class="comment">--  降序</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>15、分页</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">ORDER</span> <span class="keyword">BY</span> id <span class="keyword">ASC</span> LIMIT <span class="number">10</span>,<span class="number">3</span>  <span class="comment">-- 从第11行开始显示，每页3个数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">ORDER</span> <span class="keyword">BY</span> id <span class="keyword">ASC</span> LIMIT <span class="number">10</span>    <span class="comment">-- 前10条语句</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">ORDER</span> <span class="keyword">BY</span> id <span class="keyword">ASC</span> LIMIT <span class="number">10</span> <span class="keyword">OFFSET</span> <span class="number">3</span>; <span class="comment">-- 相当于 limit 3,10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">ORDER</span> <span class="keyword">BY</span> id <span class="keyword">ASC</span> LIMIT <span class="number">10</span>,<span class="number">-1</span>  <span class="comment">-- 检索到最后一条数据</span></span><br></pre></td></tr></table></figure>

<h1 id="5-DCL：事务"><a href="#5-DCL：事务" class="headerlink" title="5.DCL：事务"></a>5.DCL：事务</h1><h2 id="5-1、事务原则"><a href="#5-1、事务原则" class="headerlink" title="5.1、事务原则"></a>5.1、事务原则</h2><ul>
<li>原子性：要么都成功，要么都失败</li>
<li>一致性：事务执行前后都满足**数据库的完整性约束 **，如A、B转账前后总和不变</li>
<li>隔离性：多个事务互不影响</li>
<li>持久性：事务完成后，持久化</li>
</ul>
<h2 id="5-2、手动执行事务"><a href="#5-2、手动执行事务" class="headerlink" title="5.2、手动执行事务"></a>5.2、手动执行事务</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">0</span>   <span class="comment">-- 关闭事务，MySQL时默认开始事务提交的，要手动操作必须先关闭事务</span></span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">1</span>   <span class="comment">-- 开启事务</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">START</span> TRANSACTION    <span class="comment">-- 事务开始</span></span><br><span class="line"><span class="keyword">COMMIT</span>               <span class="comment">-- 事务提交，一旦提交就持久化了</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SAVEPOINT</span> 保存点名               <span class="comment">-- 记录保存点，可以回滚到改点</span></span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> <span class="keyword">SAVEPOINT</span> 保存点名   <span class="comment">-- 回滚</span></span><br><span class="line"><span class="keyword">RELEASE</span> <span class="keyword">SAVEPOINT</span> 保存点名       <span class="comment">-- 撤销保存点名</span></span><br></pre></td></tr></table></figure>

<h2 id="5-3、并发问题"><a href="#5-3、并发问题" class="headerlink" title="5.3、并发问题"></a>5.3、并发问题</h2><ul>
<li><strong>读脏数据：</strong>     事务A读取了事务B更新的数据，然后B回滚操作，那么A读取到的数据是脏数据</li>
<li><strong>不可重复读：</strong> 一个事务对同一数据两次读到的<strong>值</strong>不同</li>
<li><strong>幻影读：</strong>        事务B对表 table 进行读取，在此过程中事务A对表 table 增加了一条数据，事务B修改完毕后发现<strong>还有一条数据没有读取</strong>，好像发生了环境</li>
</ul>
<blockquote>
<p>事务隔离级别</p>
</blockquote>
<table>
<thead>
<tr>
<th>级别</th>
<th>约束</th>
</tr>
</thead>
<tbody><tr>
<td>READ UNCOMMITTED（未提交读）</td>
<td>没有限制</td>
</tr>
<tr>
<td>READ COMMITTED（提交读）</td>
<td>不允许读未提交的数据，但是数据仍然可能在事务结束前被修改</td>
</tr>
<tr>
<td>REPEATABLE READ（可重复读）</td>
<td>保证一个事务中重复读到的数据保持同样的值，但允许其他用户将新幻影行插入数据集</td>
</tr>
<tr>
<td>SERIALIZABLE（可串行读）</td>
<td>不允许其他用户在事务完成前更新数据集或者将行插入到数据集</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>隔离级别</th>
<th>丢失更新</th>
<th>读脏数据</th>
<th>不可重复读</th>
<th>幻影读</th>
</tr>
</thead>
<tbody><tr>
<td>READ UNCOMMITTED（未提交读）</td>
<td>是</td>
<td>是</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>READ COMMITTED（已提交读）</td>
<td>否</td>
<td>否</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>REPEATABLE READ（可重复度）</td>
<td>否</td>
<td>否</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td>SERIALIZABLE（可串行读）</td>
<td>否</td>
<td>否</td>
<td>否</td>
<td>否</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 设置MySQL连接的隔离级别</span></span><br><span class="line"><span class="keyword">set</span> transaction isolation level read committed;</span><br><span class="line"><span class="comment">-- 设置数据库系统的全局的隔离级别</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level read committed;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> SESSION TRANSACTION ISOLATION LEVEL SERIALIZABLE  <span class="comment">-- 设置可串行读</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION    <span class="comment">-- 事务开始</span></span><br><span class="line"><span class="keyword">COMMIT</span>               <span class="comment">-- 事务提交</span></span><br></pre></td></tr></table></figure>

<h2 id="5-4、封锁"><a href="#5-4、封锁" class="headerlink" title="5.4、封锁"></a>5.4、封锁</h2><p>基本锁</p>
<ul>
<li><p>排它锁（写锁）：不能同时写</p>
</li>
<li><p>共享锁（读锁）：可以同时读</p>
<p>为什么可以同时读还要加锁？</p>
<p>原因：防止读写同时进行，如果不锁就可能发生读脏等</p>
</li>
</ul>
<p>锁的粒度：锁封锁对象的大小</p>
<p>封锁协议</p>
<ul>
<li>一级封锁协议：事务修改前加写锁，结束后解锁。读的事务不加锁</li>
<li>二级封锁协议：事务修改前加写锁，结束后解锁。事务读前加锁，读后立即释放</li>
<li>三级封锁协议：事务修改前加写锁，结束后解锁。事务读前加锁，事物结束后才释放</li>
</ul>
<p>一级只能防止丢失更新，二级能防止丢失更新和读脏数据，三级能防止丢失更新，读脏数据和不可重复读</p>
<h2 id="5-5、封锁带来的问题"><a href="#5-5、封锁带来的问题" class="headerlink" title="5.5、封锁带来的问题"></a>5.5、封锁带来的问题</h2><ul>
<li>饿死：</li>
<li>活锁：某个事务永远处于等待</li>
<li>死锁</li>
</ul>
<h2 id="5-6、两段锁协议实现可串行化"><a href="#5-6、两段锁协议实现可串行化" class="headerlink" title="5.6、两段锁协议实现可串行化"></a>5.6、两段锁协议实现可串行化</h2><p><strong>两段的含义</strong>：第一阶段获得锁，不能释放锁，第二阶段释放锁，不能获得锁。</p>
<p>两段锁协议必须遵循以下两条规则：</p>
<ul>
<li><p>在对任何数据读写操作之前，事务必须获得锁</p>
</li>
<li><p>释放一个锁之后，事务不再获申请得任何其他锁、</p>
<p>两段锁协议没有要求事务一次将所有要的数据全部枷锁，因此可能发生死锁。</p>
</li>
</ul>
<p><strong>遵循两段锁协议的一次封锁法</strong></p>
<ul>
<li>一次封锁法要求每个事务必须一次将所有要使用的数据全部加锁，否则不能继续执行。一次封锁法遵循两段锁协议，可以防止死锁。</li>
</ul>
<h2 id="5-7、MySQL的锁实现"><a href="#5-7、MySQL的锁实现" class="headerlink" title="5.7、MySQL的锁实现"></a>5.7、MySQL的锁实现</h2><blockquote>
<p>表级锁</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Lcok TABLES student READ;    <span class="comment">-- 上锁，读锁 WRITE为写锁</span></span><br><span class="line">UNLOCK <span class="keyword">TABLE</span>;                <span class="comment">-- 解锁</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>行级锁</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> TRANSACTION    <span class="comment">-- 事务开始</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span> LOCK <span class="keyword">IN</span> SHARE MODE;     <span class="comment">-- 共享锁（读锁）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span> <span class="keyword">FOR</span> UPDATE;             <span class="comment">-- 排他锁（写锁）</span></span><br><span class="line"><span class="comment">-- 增删改语句MySQL会自动加上隐式排它锁</span></span><br><span class="line"><span class="keyword">commit</span>               <span class="comment">---提交后自动解锁</span></span><br></pre></td></tr></table></figure>





<h1 id="6-DCL：权限管理"><a href="#6-DCL：权限管理" class="headerlink" title="6.DCL：权限管理"></a>6.DCL：权限管理</h1><blockquote>
<p>用户管理</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> wzh<span class="variable">@localhost</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span>    <span class="comment">-- 创建用户wzh，密码123456</span></span><br><span class="line">	        <span class="comment">-- @后面是主机名，如果指定了那么创建的用户必须通过该主机连接</span></span><br><span class="line">	        <span class="comment">-- 并且修改也必须带上@主机名</span></span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="operator">=</span> PASSWORD(<span class="string">&#x27;123456&#x27;</span>)                     <span class="comment">-- 修改本机密码</span></span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> wzh<span class="variable">@localhost</span> <span class="operator">=</span> PASSWORD(<span class="string">&#x27;1234566&#x27;</span>)  <span class="comment">-- 指定用户修改密码</span></span><br><span class="line">RENAME <span class="keyword">USER</span> wzh<span class="variable">@localhost</span> <span class="keyword">TO</span> wzh                      <span class="comment">-- 更改用户名</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> wzh                                         <span class="comment">-- 删除用户</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>权限管理</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> wzh    <span class="comment">-- 授权对所有表的所有权限给wzh用户</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> school.student <span class="keyword">TO</span> wzh  <span class="comment">--只给school数据库的student表的所有权限</span></span><br><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> wzh                   <span class="comment">-- 显示用户wzh的权限</span></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">FROM</span> wzh <span class="comment">-- 撤销权限</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>角色管理：MySQL8.0新增</p>
</blockquote>
<p>如果用户被授予角色权限，则该用户拥有该角色的权限。</p>
<h1 id="7-备份"><a href="#7-备份" class="headerlink" title="7.备份"></a>7.备份</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 导出  导出：多张表不要加逗号，用空格就行</span></span><br><span class="line"><span class="comment">--         主机名                      数据库  表          文件名      </span></span><br><span class="line">mysqldump <span class="operator">-</span>hlocalhost <span class="operator">-</span>uroot <span class="operator">-</span>p123456 school student <span class="operator">&gt;</span>D:<span class="operator">/</span>a.sql</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 导入</span></span><br><span class="line">source d:<span class="operator">/</span>a.sql                     <span class="comment">-- 已经登录</span></span><br><span class="line">mysql <span class="operator">-</span>uroot <span class="operator">-</span>p123456 库名<span class="operator">&lt;</span>备份文件   <span class="comment">-- 未登录</span></span><br></pre></td></tr></table></figure>



<h1 id="8-三大范式"><a href="#8-三大范式" class="headerlink" title="8.三大范式"></a>8.三大范式</h1><p>三大范式：</p>
<ul>
<li>第一范式：保证每一列不可再分</li>
<li>第二范式：满足第一范式且数据表中的每一列只描述一件事情</li>
<li>第三范式：每一列数据都和主键直接相关</li>
</ul>
<h1 id="9-一些常用命令"><a href="#9-一些常用命令" class="headerlink" title="9.一些常用命令"></a>9.一些常用命令</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE school    <span class="comment">-- 显示数据库的sql语句</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student      <span class="comment">-- 显示创建表的sql语句</span></span><br><span class="line"><span class="keyword">DESC</span> student                   <span class="comment">-- 显示表结构</span></span><br><span class="line"><span class="keyword">DESCRIBE</span> student               <span class="comment">-- 显示表结构</span></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Bug</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2021/06/20/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">http://example.com/2021/06/20/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Notes</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/">MySQL数据库基础</a></div><div class="post_share"><div class="social-share" data-image="/img/cover/0.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/06/19/hello-world/"><img class="prev-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Hello World</div></div></a></div><div class="next-post pull-right"><a href="/2021/06/21/JavaSE/JavaSE%20(%20%E4%B8%80%20)%20%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"><img class="next-cover" src="/img/cover/1.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JavaSE(一):基本语法</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">1.初识数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">1.1、数据库基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E7%B1%BB"><span class="toc-text">1.2、数据库分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3%E3%80%81%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-text">1.3、数据模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-text">1.4、数据库体系结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5%E3%80%81SQL%E8%AF%AD%E8%A8%80%E7%BB%84%E6%88%90"><span class="toc-text">1.5、SQL语言组成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6%E3%80%81%E5%AE%89%E8%A3%85mysql"><span class="toc-text">1.6、安装mysql</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-text">2.数据库基础概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%97%E7%B1%BB%E5%9E%8B"><span class="toc-text">2.1、数据库列类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B4%E5%9E%8B"><span class="toc-text">整型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F"><span class="toc-text">时间日期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81Null"><span class="toc-text">4、Null</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7"><span class="toc-text">2.2、数据库的字段属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">2.3、数据库表的类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4%E3%80%81MySQL%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-text">2.4、MySQL常用函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81MySQL%E5%B8%B8%E9%87%8F"><span class="toc-text">1、MySQL常量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-text">2、常用函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-text">3、聚合函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81MD5%E5%8A%A0%E5%AF%86"><span class="toc-text">4、MD5加密</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-DDL%E7%BB%93%E6%9E%84%E5%8C%96%E8%AF%AD%E5%8F%A5"><span class="toc-text">3.DDL结构化语句</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1%E3%80%81DDL%E4%B9%8B%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">3.1、DDL之创建数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E3%80%81DDL%E4%B9%8B%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-text">3.2、DDL之创建表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3%E3%80%81DDL%E4%B9%8B%E8%A1%A8%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-text">3.3、DDL之表的修改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4%E3%80%81%E6%95%B0%E6%8D%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">3.4、数据约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5%E3%80%81%E7%B4%A2%E5%BC%95"><span class="toc-text">3.5、索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E7%B4%A2%E5%BC%95"><span class="toc-text">1、索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E7%B4%A2%E5%BC%95%E5%88%86%E7%B1%BB"><span class="toc-text">2、索引分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95"><span class="toc-text">3、使用索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E7%BB%84%E5%90%88%E7%B4%A2%E5%BC%95"><span class="toc-text">4、组合索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98"><span class="toc-text">5、索引失效问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-DML%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-text">4.DML增删改查</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1%E3%80%81DML%E8%AF%AD%E8%A8%80%E4%B9%8B%E5%A2%9E%E5%88%A0%E6%94%B9"><span class="toc-text">4.1、DML语言之增删改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3%E3%80%81DML%E8%AF%AD%E8%A8%80%E4%B9%8B%E6%9F%A5"><span class="toc-text">3.3、DML语言之查</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-DCL%EF%BC%9A%E4%BA%8B%E5%8A%A1"><span class="toc-text">5.DCL：事务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1%E3%80%81%E4%BA%8B%E5%8A%A1%E5%8E%9F%E5%88%99"><span class="toc-text">5.1、事务原则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2%E3%80%81%E6%89%8B%E5%8A%A8%E6%89%A7%E8%A1%8C%E4%BA%8B%E5%8A%A1"><span class="toc-text">5.2、手动执行事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3%E3%80%81%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98"><span class="toc-text">5.3、并发问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4%E3%80%81%E5%B0%81%E9%94%81"><span class="toc-text">5.4、封锁</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5%E3%80%81%E5%B0%81%E9%94%81%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">5.5、封锁带来的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6%E3%80%81%E4%B8%A4%E6%AE%B5%E9%94%81%E5%8D%8F%E8%AE%AE%E5%AE%9E%E7%8E%B0%E5%8F%AF%E4%B8%B2%E8%A1%8C%E5%8C%96"><span class="toc-text">5.6、两段锁协议实现可串行化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-7%E3%80%81MySQL%E7%9A%84%E9%94%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">5.7、MySQL的锁实现</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-DCL%EF%BC%9A%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-text">6.DCL：权限管理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%A4%87%E4%BB%BD"><span class="toc-text">7.备份</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F"><span class="toc-text">8.三大范式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">9.一些常用命令</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 By Bug</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my blog!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>